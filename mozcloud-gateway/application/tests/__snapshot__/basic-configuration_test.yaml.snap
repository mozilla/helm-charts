Configuration matches entire snapshot:
  1: |
    apiVersion: networking.gke.io/v1
    kind: GCPBackendPolicy
    metadata:
      labels:
        app.kubernetes.io/component: test-service
        app.kubernetes.io/managed-by: argocd
        app.kubernetes.io/name: mozcloud-test
        component_code: test-service
        env_code: dev
        helm.sh/chart: test-chart
        realm: nonprod
      name: test-service
    spec:
      default:
        logging:
          enabled: true
          sampleRate: 100000
      targetRef:
        group: ""
        kind: Service
        name: test-service
  2: |
    apiVersion: gateway.networking.k8s.io/v1
    kind: Gateway
    metadata:
      annotations:
        networking.gke.io/certmap: mozcloud-test-nonprod-dev
      labels:
        app.kubernetes.io/component: test-service
        app.kubernetes.io/managed-by: argocd
        app.kubernetes.io/name: mozcloud-test
        component_code: test-service
        env_code: dev
        helm.sh/chart: test-chart
        realm: nonprod
      name: test-gateway
    spec:
      addresses:
        - type: NamedAddress
          value: mozcloud-test-dev-ip-v4
      gatewayClassName: gke-l7-global-external-managed
      listeners:
        - allowedRoutes:
            namespaces:
              from: Same
          name: http
          port: 80
          protocol: HTTP
        - allowedRoutes:
            namespaces:
              from: Same
          name: https
          port: 443
          protocol: HTTPS
  3: |
    apiVersion: networking.gke.io/v1
    kind: GCPGatewayPolicy
    metadata:
      labels:
        app.kubernetes.io/component: test-service
        app.kubernetes.io/managed-by: argocd
        app.kubernetes.io/name: mozcloud-test
        component_code: test-service
        env_code: dev
        helm.sh/chart: test-chart
        realm: nonprod
      name: test-gateway
    spec:
      default:
        sslPolicy: mozilla-intermediate
      targetRef:
        group: gateway.networking.k8s.io
        kind: Gateway
        name: test-gateway
  4: |
    apiVersion: networking.gke.io/v1
    kind: HealthCheckPolicy
    metadata:
      labels:
        app.kubernetes.io/component: test-service
        app.kubernetes.io/managed-by: argocd
        app.kubernetes.io/name: mozcloud-test
        component_code: test-service
        env_code: dev
        helm.sh/chart: test-chart
        realm: nonprod
      name: test-service
    spec:
      default:
        config:
          httpHealthCheck:
            requestPath: /__lbheartbeat__
          type: HTTP
      targetRef:
        group: ""
        kind: Service
        name: test-service
  5: |
    apiVersion: gateway.networking.k8s.io/v1
    kind: HTTPRoute
    metadata:
      labels:
        app.kubernetes.io/component: test-service
        app.kubernetes.io/managed-by: argocd
        app.kubernetes.io/name: mozcloud-test
        component_code: test-service
        env_code: dev
        helm.sh/chart: test-chart
        realm: nonprod
      name: test-httproute
    spec:
      hostnames:
        - test-service.dev.test-domain.com
      parentRefs:
        - group: gateway.networking.k8s.io
          kind: Gateway
          name: test-gateway
          sectionName: https
      rules:
        - backendRefs:
            - group: ""
              kind: Service
              name: test-service
              port: 8080
  6: |
    apiVersion: gateway.networking.k8s.io/v1
    kind: HTTPRoute
    metadata:
      labels:
        app.kubernetes.io/component: test-service
        app.kubernetes.io/managed-by: argocd
        app.kubernetes.io/name: mozcloud-test
        component_code: test-service
        env_code: dev
        helm.sh/chart: test-chart
        realm: nonprod
      name: test-httproute-http-redirect
    spec:
      hostnames:
        - test-service.dev.test-domain.com
      parentRefs:
        - group: gateway.networking.k8s.io
          kind: Gateway
          name: test-gateway
          sectionName: http
      rules:
        - filters:
            - requestRedirect:
                scheme: https
                statusCode: 302
              type: RequestRedirect
          matches:
            - path:
                type: PathPrefix
                value: /
  7: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: test-service
        app.kubernetes.io/managed-by: argocd
        app.kubernetes.io/name: mozcloud-test
        component_code: test-service
        env_code: dev
        helm.sh/chart: test-chart
        realm: nonprod
      name: test-service
    spec:
      ports:
        - name: http
          port: 8080
          protocol: TCP
          targetPort: http
      selector:
        app.kubernetes.io/component: test-service
        app.kubernetes.io/name: mozcloud-test
        env_code: dev
      type: ClusterIP
