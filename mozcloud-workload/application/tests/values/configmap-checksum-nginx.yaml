---
workloads:
  test-deployment:
    component: web
    nginx:
      enabled: true
      # Using a custom configmap for nginx
      configMap: my-nginx-configmap
    container:
      image:
        repository: test-repo/test-image
        tag: 1.0.0
      # Mount a regular configMap as a volume
      volumes:
        - name: test-config-volume
          type: configMap
          path: /etc/config
          readOnly: true
    hosts:
      test-deployment:
        domains:
          - test-deployment.dev.test-domain.com
        addresses:
          - test-ip
        tls:
          certs:
            - test-cert

configMaps:
  # This is a config map that will be mounted as a volume by a regular container
  test-config-volume:
    data:
      config.json: |
        {
          "key": "value",
          "number": 42
        }
  # This is a custom nginx configmap
  my-nginx-configmap:
    data:
      nginx.conf: |
        events {
            worker_connections 1024;
        }
        http {
            server {
                listen 8080;
                location / {
                    proxy_pass http://localhost:8000;
                }
            }
        }
